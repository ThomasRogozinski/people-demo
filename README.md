# README #

Sample App to demonstrate how to build C# Api client, consume and process input payload in predefined way.

### Prerequisites ###

* Minimum requirement: Visual Studio 2017
* To reproduce steps generating swagger api file: Node.js and npm
* To reproduce steps generating RestSharp API client: Java8


### How do I get set up? ###

* Clone repository
* Compile source code in Visual Studio 2017
* Run TestApp from command line from the project output folder

### Solution description ###

Solution consists of 4 projects:

#### PeopleApi library ####
PeopleApi is a RestSharp Api client. It is swagger generated code. 
Given Api example is very simple and it would be very easy to derive model and access GET function writing code manually. 
But usually in real life scenarios it is not that easy and Api interfaces are much more complex. 
Therefore I wanted to demonstrate more robust approach which can be applied in production environment to RESTFul Api of any complexity.

How PeopleApi code was generated?

Restfull APIs quite often are described in Swagger/Raml/Yaml files. 
In this instance there is no API description.  To create swagger file api2swagger node package can be used:
[https://www.npmjs.com/package/api2swagger](https://www.npmjs.com/package/api2swagger) 


to install it and create swagger api file use:
```
npm install -g api2swagger
api2swagger -e "http://agl-developer-test.azurewebsites.net/people.json" -o ./people_swagger.json -X GET
```
and follow directions

having swagger file describing API .Net c# API client code can generated automatically by swagger codegen:
[https://github.com/swagger-api/swagger-codegen](https://github.com/swagger-api/swagger-codegen)

to download java jar file and generate C# code use:
```
wget http://central.maven.org/maven2/io/swagger/swagger-codegen-cli/2.3.1/swagger-codegen-cli-2.3.1.jar -O swagger-codegen-cli.jar
java -jar swagger-codegen-cli.jar generate -i people_swagger.json -l CsharpDotNet2 -o ./PeopleTest
```
API Client Code generated by swagger tools is wrapped in PeopleApi library

#### PeopleUtils library ####
PeopleUtils provides set of classes to access Api payload and process it.
Wrapping it in a library adds modularity to the system and this functionality can be reused by various other projects within the solution simply by adding this library to the project.

#### TestApp executable ####
Application to test created functionality: consume people.json and process its content in order to produce desired outcome.
In order to run it compile the project and run command console from the project output folder:
```
TestApp.exe
```
The reason why console application was chosen for demonstration purposes is that its project structure is the simplest and best for demonstrating any types of proof of concepts. 
Project structure is very simple and it doesn't "pollute" space with dozens of other files which often make it difficult to understand the main concept application tries to demonstrate.

#### UnitTest ####
UnitTest contains only one function which is making sure the logic extracting required information works as it is supposed to. 
There is no need to test api client functionality because the code was generated automatically by open source community tools and all those tools have its own test regime applied.

Only for purpose of UnitTest UnityContainer concept was applied in the solution.
UnityContainer was used to provide ability to redirect data consumer from live Api to mocked data.


